sudo: false

language: node_js

node_js:
    - 4
    - 6
    - 7

matrix:
    fast_finish: true

cache:
    directories:
        - node_modules

before_install:
    - npm config set progress false
    - npm install -g npm

install:
    - npm prune
    - npm update

script:
    - npm install . -g >/dev/null && npm uninstall . -g >/dev/null
    - mkdir -p "/tmp/$TRAVIS_REPO_SLUG" && cd "/tmp/$TRAVIS_REPO_SLUG" && npm init -y >/dev/null
    - npm install "$TRAVIS_BUILD_DIR" >/dev/null && npm uninstall "$TRAVIS_BUILD_DIR" >/dev/null
    - node -e "const cli = require('@$TRAVIS_REPO_SLUG');"
    - cd "$TRAVIS_BUILD_DIR"

deploy:
    - provider: npm
      email: npm@whizark.com
      api_key:
          secure: H1u0hQHkeKA0z88ZyvhnZy/yFSW71RROID6ue6loRaKxxtWWJh6x9vDVy+GiEmBO68euXxL3koExprGLM/T8Rm1d1jXPw2Oc/8lLQevv51dmDuEOrlBEmFg65lttC05ETgY8GokSXuv9pYZDSpBBwHuPyOcG7GF77ZYMmEVGFzUwepILHX4TSkllaPA7+VkO+ubarHt46Tf27F6uy0P+QI9WPuhmQ+e7BrTO4FobgzJ3yv0QhriQCYpcc8W72vemN/9VLLBBeK5uxRSsaFOqG4z/gOriA07qLvsgHbflE/k8QgAwh7EBrZqkYnCzKn8DXnxRKgEffwFJ683KFtS4g/aJOPq95EzzujOhGKhXyYtRxZbdN5Hm37uHYJyZNYCXrauD7w++ILyHuGlO6jpXDJKLDTZz76DNc9RJDPS60gXZyuqnC6toTsSZ2e8lwvdOv1sqrAD8M5mzRZB/vvrV4lCv2BFnZkmwAUzEGB485zdoyekRxA2sC9hhHUD/L9dOvC3Jxpdz8tulFLpbiL7BeUuROcIfJB+rAyQ8KIbRkp00GIFiHRk48HN6sNDePz9gIk9rY1qjIpndtAQiyoUvqFVxhwFx+2m22KQr0IzEHGFHuZCG0LtPSJINQpYcUNNh4UdwC7cRdvA0Zs5FiIceVTT8LIkyzaAWdVpJA0SI7g8=
      on:
          node: 6
          repo: whizark/stylelint-cli
          branch: master
          tags: true

notifications:
    email: false

    slack:
        rooms:
            - secure: QJ138SeehoIw1U1UJcCx4Q21JMm+Yb4wGQZwvK6VxpTRmEOStwe4sP1EXuxQWcNX/5jTPheTy1UroMinn1OYOFvWwau7kuw04WgQNBJq/LpPQlLNig/gysRdJRSIv5BmiNfEek85B6v8iQ9QXLtj4goN9XZDZcjGAvc8j77Arq5OqiTPs29IPvWKUhJhnNqduwPYHWOGna+gUKT4CA7Ru4+zYrfpBJR7oqdtiao/KYkuC118x9q+zcIgZO0UL1pcDssz6ddt/Zf7JC/V4S6ikuiHlYS64vtVlTytcQIwhjYIBGBCUxa/YrxBnbw4BOBW0JVVuvGu4WWlatPdknNMVFc9IkkBROkyDS5L4IlzbeMvRaPddcml5rCuhEUJHb5YWa7JOaA8P7JJgcySBsrlTA9Nz2CihnRFbBVUQ6p2p9G0x5KGlp8doBKeoaZfLMDID53ZFMggJ+fstVvKYZZLkPG59m1/2/OCmi7ID3JdcpvvghiqxTMWDl6/LMLVvGrFBBBS071ie1/EHoWMy6xBnyz+cB5f6LihQtlyKkT57Uj3aYm7SMSNhtc78P2B62IBTZz1F4EE3nAJxbsSmmALjX0diq/0QEGTiJbvzpfcNiQf+FsRAIGwqMDDP+2dx5ZhJ7Lc2V19G/E3mjg3bVg3WvBM1ResYKG9c9JuLgGobBU=
        on_pull_requests: false
        on_start: never
        on_success: never
        on_failure: change
